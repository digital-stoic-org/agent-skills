# Praxis

## Security ðŸ”’

**NEVER read/parse:** `.env*`, `*credentials*`, `*secrets*`, `*token*`, `*.key`, `*.pem`, `*.crt`, `*.p12`, `*.pfx`, `.npmrc`, `pypirc`, `*.keystore`, `.aws/*`, `.azure/*`, `gcloud-service-key.json`. Warn user if requested, get confirmation. See `@reference/standards/security-patterns.md` for full list.

## Communication Principles

- **Ask clarification questions** when needed or before starting big tasks
- **Never hallucinate or assume information** without supporting facts
- **When you don't know, say so** â€” honesty over speculation

## Git Commits

**Conventional Commits:** `type(scope): description`
- Scope: project folder name
- Types: feat|fix|docs|refactor|test|chore|perf|build|ci
- Deliverables (analysis/specs/research) = `feat`, not `docs`
- NEVER add Claude/Anthropic attribution or co-author tags

**Pre-commit (OVERRIDE: NEVER auto-commit):**
1. Show `git status` + `git diff --staged`
2. List files + proposed message
3. **WAIT for user confirmation**

## Rules

- `**/.in/`: initial context for project bootstrap

## Alias Paths

- **gtd-pcm**: control `/praxis/vaults/gtd-pcm` | data `/vaults/gtd-pcm`
- **agent-skills**: control `/home/mat/dev/praxis` | data `/home/mat/dev/agent-skills`

(Control: instructions, OpenSpec, context. Data: project files in separate git repo.)

## Planning

- **Boulder â†’ Pebbles**: Break complex features into trackable stories
- Ask user upfront if OpenSpec should be used for the task
- Use OpenSpec for boulders (multi-step, architectural, ambiguous scope)
- Skip OpenSpec for pebbles (single file, obvious implementation)

## Style

**Human output (responses, docs, explanations):**
- **Visual-first:** Mermaid diagrams by default for technical (e.g., architecture/flows/data) AND non-technical (e.g., decisions/processes/comparisons). Colorize with classDef/fill/stroke. **ALWAYS use black text** (`color:#000`) for nodes with colored backgrounds.
- **Structured data:** YAML/JSON with emoji (âœ…âŒðŸŽ¯âš ï¸ðŸš€)
- **OVERRIDE: Use emojis liberally** âœ…âŒðŸŽ¯ðŸš€ðŸ”ðŸ’¾ðŸ§ªðŸ“¦âš ï¸âœ¨ðŸŽ¨ðŸ”§

**LLM context (`*-llm.md`, specs, agent prompts):**
- **Token-optimized:** All `-llm.md` files must be optimized for tokens. Strip prose, keep directives/facts/structure only.
- **Visual structure:** Mermaid diagrams for complex flows/hierarchies/relationships. More efficient than prose explanations.
- **Structured data:** Clean YAML/JSON without emoji. Optimized for parsing.
- **Markdown:** Semantic headings, bullets, code blocks. No decorative formatting.

## Mermaid

- Wrap labels in quotes: `["Label"]`
- Multi-target connections: use `&` operator: `A -->|label| B & C & D`
- Define nodes inside subgraphs before referencing them
- **Black text mandatory:** ALL classDef with colored fills MUST include `color:#000` for readability
  - Example: `classDef success fill:#90EE90,stroke:#333,color:#000`

# Instructions: ALWAYS use `rtk` instead of standard Unix commands

`rtk` compresses command output to save 70-90% tokens. **MANDATORY** for all Bash tool calls.

**Chaining:** Always prefix each command: `rtk git add && rtk git commit -m "msg" && rtk git push`

## Substitution table â€” ALWAYS use right column

| Instead of | Use |
|---|---|
| `ls`, `tree` | `rtk ls <path>` |
| `cat`, `head`, `tail` | `rtk read <file>` |
| `cat` (code understanding) | `rtk read <file> -l aggressive` |
| `find`, `fd` | `rtk find <pattern>` |
| `git status` | `rtk git status` |
| `git log` | `rtk git log` |
| `git diff` | `rtk git diff` |
| `git add` | `rtk git add` |
| `git commit -m "msg"` | `rtk git commit -m "msg"` |
| `git push` | `rtk git push` |
| `git pull` | `rtk git pull` |
| `grep -rn`, `rg` | `rtk grep <pattern>` |
| `pytest`, `npm test`, etc. | `rtk test <cmd>` |
| `<cmd> 2>&1 \| grep error` | `rtk err <cmd>` |
| `cat file.log` | `rtk log <file>` |
| `cat *.json` | `rtk json <file>` |
| `env`, `printenv` | `rtk env` |
| `docker ps/images/logs` | `rtk docker ps/images/logs <c>` |
| `kubectl get pods/logs` | `rtk kubectl pods/logs <pod>` |
| any long command | `rtk summary <cmd>` |

**Additional commands:** `rtk smart <file>` (2-line summary), `rtk deps` (dependency summary), `rtk kubectl services`
